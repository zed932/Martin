<div class="test-results">
  <div class="results-header">
    <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤</h3>
    <div class="filters">
      <select class="filter-select">
        <option value="">–í—Å–µ —Ç–µ—Å—Ç—ã</option>
        <option value="sets">–¢–µ–æ—Ä–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤</option>
        <option value="matrices">–ú–∞—Ç—Ä–∏—Ü—ã</option>
        <option value="algebra">–ê–ª–≥–µ–±—Ä–∞</option>
      </select>
      <select class="filter-select">
        <option value="">–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</option>
        <option value="student">–°—Ç—É–¥–µ–Ω—Ç—ã</option>
        <option value="admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã</option>
      </select>
    </div>
  </div>

  <div class="results-table">
    <table>
      <thead>
      <tr>
        <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
        <th>–¢–µ—Å—Ç</th>
        <th>–î–∞—Ç–∞</th>
        <th>–†–µ–∑—É–ª—å—Ç–∞—Ç</th>
        <th>–û—Ü–µ–Ω–∫–∞</th>
        <th>–í—Ä–µ–º—è</th>
      </tr>
      </thead>
      <tbody>
        @for (result of testResults; track result.id) {
          <tr>
            <td>
              <div class="user-cell">
                <div class="user-avatar">{{ result.userName.charAt(0) }}</div>
                <div>
                  <strong>{{ result.userName }}</strong>
                  <div class="user-email">{{ result.userEmail }}</div>
                </div>
              </div>
            </td>
            <td>{{ result.testName }}</td>
            <td>{{ result.date }}</td>
            <td>
              <div class="score-bar">
                <div class="score-fill" [style.width.%]="(result.correct / result.total) * 100"></div>
                <span>{{ result.correct }}/{{ result.total }}</span>
              </div>
            </td>
            <td>
              <span class="grade-badge" [class.excellent]="result.grade === '–û—Ç–ª–∏—á–Ω–æ'"
                    [class.good]="result.grade === '–•–æ—Ä–æ—à–æ'"
                    [class.average]="result.grade === '–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ'">
                {{ result.grade }}
              </span>
            </td>
            <td>{{ result.timeSpent }}</td>
          </tr>
        }
      </tbody>
    </table>
  </div>

  <div class="stats-summary">
    <div class="stat-item">
      <span class="stat-label">–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ:</span>
      <span class="stat-value">{{ totalTests }}</span>
    </div>
    <div class="stat-item">
      <span class="stat-label">–°—Ä–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</span>
      <span class="stat-value">{{ averageScore }}%</span>
    </div>
    <div class="stat-item">
      <span class="stat-label">–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</span>
      <span class="stat-value">{{ bestScore }}%</span>
    </div>
  </div>

  <div class="export-section">
    <button class="btn-export">
      üì• –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    </button>
    <button class="btn-print">
      üñ®Ô∏è –ü–µ—á–∞—Ç—å –æ—Ç—á–µ—Ç–∞
    </button>
  </div>
</div>
